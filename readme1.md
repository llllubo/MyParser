## Implementačná dokumentácia k 1. úlohe do IPP 2019/2020
## Meno a priezvisko: Ľuboš Vajčovec
## Login: xvajco00

### Vzhľad zdrojového kódu
Zdrojový kód začína úvodnou hlavičkou s dôležitými údajmi o tomto skripte a jeho autorstve, pokračuje deklaráciou konštánt, ktoré výraznejšie sprehľadňujú kód v hlavnej časti skriptu, a definíciami funkcií, za ktorými bezprostredne začína hlavná časť skriptu. V jej úvode sa nachádza počiatočná inicializácia premenných, opäť z dôvodu prehľadnosti a okamžitej vedomosti o ich následnom používaní.

### Spracovanie príkazového riadku
Skript bol implementovaný spolu s rozšírením **_'STATP'_**. Pri spracovávaní argumentov skriptu je využívaná funkcia _"getopt"_, ktorá je schopná získať parametre príkazového riadku do asociatívneho poľa špecifického pre jazyk PHP. Skript je schopný spracovať ako aj dlhé, tak aj krátke verzie parametrov. Je potrebné však dať do povedomia, že viaceré krátke verzie argumentov zapísané spolu za jednou pomĺčkou pri spušťaní skriptu, nie je možné použiť pre korektnosť fungovania rozšírenia  **_'STATP'_**. V prípade ich použitia je potrebné ich zadať separatne za jednodychými pomĺčkami. Samozrejmosťou je správne implementovanie funkcionality dlhých verzií argumentov. Úvod skriptu pokračuje _"foreach"_ cyklom, v ktorom sa prechádza vyššie spomínaným asociatívnym poľom argumentov a detekuje, resp. kontroluje sa ich výskyt. V prípade vynechania argumentu **"--stats=_file_"** (-s _file_), pričom boli zadané aspoň niektoré iné argumenty rozšírenia danej úlohy, skript končí s návratovou chybou _"10"_ a príslušným chybovým hlásením. Obdobné chovanie nastane pri kombinácii argumentov s argumentom **"--help"** (-h).

### Tvorba XML kódu
Začína analýza vstupného kódu v jazyku IPPcode20. V cykle _"while"_ sa načíta riadok po riadku zo štandardného vstupu (STDIN) a začína jeho prvotná fáza spracovania. Orezaniu bielych znakov zo začiatku a konca aktuálne načítaného riadku, predchádza vyhľadanie špeciálneho znaku _"#"_ a odstránenie zbytku reťazca za týmto znakom značiacim komentár v spracovávanom kóde. Funkcie použité pre prácu s reťazcami sú schopné spracovávať _"multibyte stringy"_, čo značí možnosť kódovania v **UTF-8** znakovej sade. Po následnej ignorácii prádznych riadkov, funkcia _"explode"_ rozčlení riadok na samostatné slova. Pre následne ľahšiu prácu s týmito slovami rozčlenenými na základe jednoznakových medzier, je vhodné aj tieto už samostatné slová orezať od prípadných krajných bielych znakov. V ďalšej a zároveň najpodstatnejšej fáze hlavnej časti skriptu je implementovaný pomerne dlhý podmienený príkaz _"if-then-else"_, v ktorom prechádza skript do rôznych stavov na základe konkrétnej inštrukcie, ktoré sú spolu zoskúpené na základe rovnakého počtu a typov požadovaných argumentov. V týchto stavoch (vetvách podmieneného príkazu) sa nachádza detekcia lexikálnych (chyba v lexéme danej inštrukcie) a syntaktických (chybný počet argumentov inštrukcie) chýb na základe regulárnych výrazov PCRE. Taktiež sa inkrementujú počítadla pre jednotlivé požiadavky týkajúce sa rozšírenia **_'STATP'_** v stavoch zodpovedajúcich požiadavke. Po týchto opatreniach dochádza k vyvolaniu niekoľkých funkcií generujúcich XML kód s použitím knižnice XMLWriter. Po skončení cyklu (spracovaní všetkých riadkov na vstupe) sa vypíše obsah XML Writer-u na štandardný výstup a správne sa ukončí práca s XML Writer-om.

### Implementované rozšírenie 'STATP'
V závere celého skriptu je krátka časť kódu realizujúca vytvorenie (v prípade neexistencie), otvorenie a zápis nazbieraných štatistík do tohto súboru, resp. jeho prepis. Štatistiky sú vpísané v poradí zadaným užívateľom na príkazovom riadku.
